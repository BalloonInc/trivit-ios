name: TestFlight Internal

# Uses shared workflow from ios-infra for TestFlight internal distribution

on:
  workflow_dispatch:
    inputs:
      run_id:
        description: 'Build workflow run ID (leave empty for latest)'
        required: false
        type: string

permissions:
  actions: read
  contents: write

jobs:
  upload:
    uses: wdvr/ios-infra/.github/workflows/ios-testflight-internal.yml@main
    with:
      bundle_id: com.wouterdevriendt.trivit
      run_id: ${{ inputs.run_id }}
      build_workflow_name: ios-build.yml
    secrets:
      APP_STORE_CONNECT_KEY_ID: ${{ secrets.APP_STORE_CONNECT_KEY_ID }}
      APP_STORE_CONNECT_ISSUER_ID: ${{ secrets.APP_STORE_CONNECT_ISSUER_ID }}
      APP_STORE_CONNECT_PRIVATE_KEY: ${{ secrets.APP_STORE_CONNECT_PRIVATE_KEY }}
