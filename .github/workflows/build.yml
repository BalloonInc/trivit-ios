name: Build

# Uses shared workflow from ios-infra for building the app

on:
  push:
    branches:
      - master
    paths:
      - 'trivit/**'
      - 'trivit Watch App/**'
      - '.github/workflows/build.yml'
  pull_request:
    branches:
      - master
    paths:
      - 'trivit/**'
      - 'trivit Watch App/**'
  workflow_dispatch:

concurrency:
  group: build-${{ github.ref }}
  cancel-in-progress: true

jobs:
  build:
    uses: wdvr/ios-infra/.github/workflows/ios-build.yml@main
    with:
      bundle_id: com.wouterdevriendt.trivit
      scheme: trivit
      workspace_path: trivit.xcworkspace
      info_plist_path: trivit/Info.plist
      additional_info_plists: 'trivit Watch App/Info.plist'
    secrets: inherit
